{% extends 'store/base.html' %}
{% load static %}

{% block title %}My Addresses - FlugEde{% endblock %}

{% block content %}
<div class="container" style="margin: 4rem auto; max-width: 1000px;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
        <h1><i class="fas fa-map-marker-alt"></i> My Addresses</h1>
        <a href="{% url 'add_address' %}" class="btn btn-primary">
            <i class="fas fa-plus"></i> Add New Address
        </a>
    </div>

    {% if addresses %}
    <div class="grid grid-2">
        {% for address in addresses %}
        <div class="card">
            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                <div>
                    <span class="badge badge-info">{{ address.get_address_type_display }}</span>
                    {% if address.is_default %}
                    <span class="badge badge-success">Default</span>
                    {% endif %}
                </div>
            </div>

            <div style="margin-bottom: 1.5rem;">
                <div style="font-weight: 600; font-size: 1.1rem; margin-bottom: 0.5rem;">{{ address.full_name }}</div>
                <div style="color: var(--text-secondary); line-height: 1.6;">
                    {{ address.address_line1 }}<br>
                    {% if address.address_line2 %}{{ address.address_line2 }}<br>{% endif %}
                    {{ address.city }}, {{ address.state }} - {{ address.pincode }}<br>
                    Phone: {{ address.phone }}
                </div>
            </div>

            <div style="display: flex; gap: 1rem;">
                <a href="{% url 'edit_address' address.id %}" class="btn btn-outline"
                    style="flex: 1; justify-content: center;">
                    <i class="fas fa-edit" style="margin-right: 0.5rem;"></i> Edit
                </a>
                <form action="{% url 'delete_address' address.id %}" method="post" style="flex: 1;"
                    onsubmit="return confirm('Are you sure you want to delete this address?');">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-danger" style="width: 100%; justify-content: center;">
                        <i class="fas fa-trash" style="margin-right: 0.5rem; pointer-events: none;"></i> Delete
                    </button>
                </form>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="card" style="text-align: center; padding: 4rem 2rem;">
        <i class="fas fa-map-marked-alt"
            style="font-size: 5rem; color: var(--text-muted); opacity: 0.3; margin-bottom: 1.5rem;"></i>
        <h2 style="margin-bottom: 1rem;">No Addresses Saved</h2>
        <p style="color: var(--text-muted); margin-bottom: 2rem;">Add a delivery address to place orders.</p>
        <a href="{% url 'add_address' %}" class="btn btn-primary">
            <i class="fas fa-plus"></i> Add Address
        </a>
    </div>
    {% endif %}
</div>
{% endblock %}